#!/usr/bin/env bash
set -euo pipefail

echo 'mas:'
mas upgrade
echo 'brew:'
brew upgrade
brew bundle dump --global --force

echo 'asdf:'
asdf update
asdf plugin update --all
echo 'rustup:'
rustup self update
rustup update

echo 'doom emacs:'
doom upgrade
echo 'fisher:'
fish -c 'fisher update'
echo 'nvim:'
nvim -c 'Update' -c 'qa'
echo 'tldr:'
tldr --update
echo 'foundry completions:'
forge completions fish > ~/.config/fish/completions/forge.fish
cast completions fish > ~/.config/fish/completions/cast.fish
anvil completions fish > ~/.config/fish/completions/anvil.fish

echo 'dotfile submodules:'
cd "$HOME/.dotfiles"
git submodule update
cd -

echo 'softwareupdate:'
sudo softwareupdate -ir
echo 'nix:'
sudo -i sh -c 'nix-channel --update && nix-env --install --attr nixpkgs.nix && launchctl remove org.nixos.nix-daemon && launchctl load /Library/LaunchDaemons/org.nixos.nix-daemon.plist'
